@import "tailwindcss";

@theme {
  --color-abstract: --alpha(var(--color-secondary-alt) / 40%);

  --load-animation-duration: 0.3s;
  --launch-animation-duration: 1s;

  --arrow-y-scale: 1.4;
  --arrow-x-scale: 0.7;

  --arrow-box-size: 2.25rem; /* size of the box */
  --arrow-box-expand-width: 4.25rem; /* size the box expands to */

  --arrow-wind-up: -1.4rem; /* how far the arrow moves to the left  */
}

.lg-btn {
  display: inline-flex;
  align-items: center;
  justify-content: space-between;
  padding: 1rem 1.5rem;
  border-radius: 9999px; /* fully rounded */
  background-color: var(--color-accent);
  color: var(--color-secondary);

  cursor: pointer;
  transition: background 0.3s ease;
  border: 5px solid var(--color-abstract);
  gap: 1rem; /* space between label and arrow */
  overflow: hidden; 
  position: relative; /* Needed for the pseudo-element to position */
  overflow: hidden;   /* Ensures the shine stays inside the button */
  min-width: 12rem; /* min width */
}

/* The buttons label (children */
.lg-btn .label {
  display: inline-block; /* Ensures the label is treated as a block */
  white-space: nowrap;  /* Prevents text wrapping */
}

/* Set width on the container that is being animationed */
.lg-btn .arrow-box-container {
  width: 3rem;
}

.lg-btn .arrow-box {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  background-color: var(--color-abstract);
  color: var(--color-primary);
  border-radius: 9999px; /* fully rounded */
  padding: 0.5rem;
  width: var(--arrow-box-size);
  height: var(--arrow-box-size);

  transition: transform 0.3s ease, width 0.3s ease; /* Add width to the transition */
}

.lg-btn:hover .arrow-box {
  animation: boxMorph var(--load-animation-duration) ease-in-out forwards;
  /* hide overflow */
  overflow: hidden;
}

.lg-btn:hover .arrow-icon {
  animation: arrowLoad var(--load-animation-duration) ease-in-out forwards;
}

.clicked .arrow-box-container .arrow-icon {
  animation: arrowLaunch var(--launch-animation-duration) ease-in-out forwards;

}


@keyframes boxMorph {
  0% {
    transform: translateX(0);
    width: var(--arrow-box-size);
    
  }
  100% {
    transform: translateX(-3px); /* pull with arrow */
    width: var(--arrow-box-expand-width); /* 4.25rem */
  }
}


@keyframes arrowLoad   {
  0% {
    transform: translateX(0rem);
    transform: scale(1, 1);

  }

  100% {
    /* transform: translateX(var(--arrow-wind-up)) scale(1, 0.6); */
    transform: translateX(var(--arrow-wind-up)) scale(var(--arrow-x-scale), var(--arrow-y-scale));

  }
}

/* Arrow Icon on click movement */
@keyframes arrowLaunch {
  0% {
    transform: translateX(var(--arrow-wind-up)) scale(var(--arrow-x-scale), var(--arrow-y-scale));
    opacity: 1;
  }
  2% {
    transform: translateX(var(--arrow-wind-up)) scale(var(--arrow-x-scale), var(--arrow-y-scale));
  }
  40% {
    transform: translateX(3rem) scale(1, 1);
  }
  60% {
    transform: translateX(3rem) scale(1, 1);
    visibility: visible;
  }
  61% {
    transform: translateX(3rem) scale(1, 1);
    visibility: hidden;
  }
  90% {
    transform: translateX(-2rem) scale(1, 1);
    visibility: hidden;
  }

  100% {
    transform: translateX(var(--arrow-wind-up)) scale(var(--arrow-x-scale), var(--arrow-y-scale));
    visibility: visible;
  }
}


/* Shine effect */
.lg-btn::before {
  content: "";
  position: absolute;
  top: -50%;
  left: -75%;
  width: 200%;
  height: 200%;
  background: linear-gradient(
    120deg,
    transparent 0%,
    rgba(255, 255, 255, 0.7) 80%,
    transparent 100%
  );
  transform: skewX(-30deg) translateX(-100%);
  transition: none;
  pointer-events: none;
}

/* Animate shine on hover */
.lg-btn:hover::before {
  animation: shine 1.5s infinite;
}

@keyframes shine {
  0% {
    transform: skewX(-30deg) translateX(-100%);
  }
  70% {
    transform: skewX(-30deg) translateX(100%);
  }
  100% {
    transform: skewX(-30deg) translateX(100%);
  }
}
